<!DOCTYPE html>
<html lang="bg">
<head>
  <%- include('../partials/header') %>
</head>
<body>
  <h1>Edit Book</h1>
  <form action="/books/<%= book.id %>?_method=PUT" method="POST">
    <div class="form-row">
      <label for="title">Title:</label>
      <input type="text" id="title" name="title" value="<%= book.title %>" required>
    </div>
    <div class="form-row">
      <label for="author">Author:</label>
      <select id="author" name="author" required>
        <% authors.forEach(author => { %>
          <option value="<%= author._id %>" <%= author._id.equals(book.author) ? 'selected' : '' %>>
            <%= author.name %>
          </option>
        <% }) %>
      </select>
    </div>
    <div class="form-row">
      <label for="publisher">Publisher:</label>
      <select id="publisher" name="publisher" required>
        <% publishers.forEach(publisher => { %>
          <option value="<%= publisher._id %>" <%= publisher._id.equals(book.publisher) ? 'selected' : '' %>>
            <%= publisher.name %>
          </option>
        <% }) %>
      </select>
    </div>
    <div class="form-row">
      <label for="publishYear">Publish Year:</label>
      <input type="date" id="publishYear" name="publishYear" value="<%= book.publishYear %>" required>
    </div>
    <div class="form-row">
      <label for="publishDate">Publish Date:</label>
      <input type="date" id="publishDate" name="publishDate" value="<%= book.publishDate.toISOString().split('T')[0] %>" required>
    </div>
    <div class="form-row">
      <label for="pageCount">Page Count:</label>
      <input type="number" id="pageCount" name="pageCount" value="<%= book.pageCount %>" required>
    </div>
    <div class="form-row">
      <label for="description">Description:</label>
      <textarea id="description" name="description"><%= book.description %></textarea>
    </div>
    <div class="form-row form-row-end btn-row">
      <a class="btn btn-danger" href="/books/<%= book.id %>">Cancel</a>
      <button class="btn btn-primary" type="submit">Update Book</button>
    </div>
  </form>
  <%- include('../partials/footer') %>
</body>
</html>